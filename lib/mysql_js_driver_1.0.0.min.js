/*! MySQL JavaScript Driver 1.0.0 Copyright (c) 2014 Yoichiro Tanaka. Apache License Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0) */
!function(){"use strict";var a={};"undefined"==typeof module?window.MySQL=a:module.exports=a}(),function(){"use strict";var a=function(){this.errorCodeMap={"-1":"IO_PENDING","-2":"FAILED","-3":"ABORTED","-4":"INVALID_ARGUMENT","-5":"INVALID_HANDLE","-6":"FILE_NOT_FOUND","-7":"TIMED_OUT","-8":"FILE_TOO_BIG","-9":"UNEXPECTED","-10":"ACCESS_DENIED","-11":"NOT_IMPLEMENTED","-12":"INSUFFICIENT_RESOURCES","-13":"OUT_OF_MEMORY","-14":"UPLOAD_FILE_CHANGED","-15":"SOCKET_NOT_CONNECTED","-16":"FILE_EXISTS","-17":"FILE_PATH_TOO_LONG","-18":"FILE_NO_SPACE","-19":"FILE_VIRUS_INFECTED","-20":"BLOCKED_BY_CLIENT","-21":"NETWORK_CHANGED","-22":"BLOCKED_BY_ADMINISTRATOR","-23":"SOCKET_IS_CONNECTED","-100":"CONNECTION_CLOSED","-101":"CONNECTION_RESET","-102":"CONNECTION_REFUSED","-103":"CONNECTION_ABORTED","-104":"CONNECTION_FAILED","-105":"NAME_NOT_RESOLVED","-106":"INTERNET_DISCONNECTED","-107":"SSL_PROTOCOL_ERROR","-108":"ADDRESS_INVALID","-109":"ADDRESS_UNREACHABLE","-110":"SSL_CLIENT_AUTH_CERT_NEEDED","-111":"TUNNEL_CONNECTION_FAILED","-112":"NO_SSL_VERSIONS_ENABLED","-113":"SSL_VERSION_OR_CIPHER_MISMATCH","-114":"SSL_RENEGOTIATION_REQUESTED","-115":"PROXY_AUTH_UNSUPPORTED","-116":"CERT_ERROR_IN_SSL_RENEGOTIATION","-117":"BAD_SSL_CLIENT_AUTH_CERT","-118":"CONNECTION_TIMED_OUT","-119":"HOST_RESOLVER_QUEUE_TOO_LARGE","-120":"SOCKS_CONNECTION_FAILED","-121":"SOCKS_CONNECTION_HOST_UNREACHABLE","-122":"NPN_NEGOTIATION_FAILED","-123":"SSL_NO_RENEGOTIATION","-124":"WINSOCK_UNEXPECTED_WRITTEN_BYTES","-125":"SSL_DECOMPRESSION_FAILURE_ALERT","-126":"SSL_BAD_RECORD_MAC_ALERT","-127":"PROXY_AUTH_REQUESTED","-128":"SSL_UNSAFE_NEGOTIATION","-129":"SSL_WEAK_SERVER_EPHEMERAL_DH_KEY","-130":"PROXY_CONNECTION_FAILED","-131":"MANDATORY_PROXY_CONFIGURATION_FAILED","-133":"PRECONNECT_MAX_SOCKET_LIMIT","-134":"SSL_CLIENT_AUTH_PRIVATE_KEY_ACCESS_DENIED","-135":"SSL_CLIENT_AUTH_CERT_NO_PRIVATE_KEY","-136":"PROXY_CERTIFICATE_INVALID","-137":"NAME_RESOLUTION_FAILED","-138":"NETWORK_ACCESS_DENIED","-139":"TEMPORARILY_THROTTLED","-140":"HTTPS_PROXY_TUNNEL_RESPONSE","-141":"SSL_CLIENT_AUTH_SIGNATURE_FAILED","-142":"MSG_TOO_BIG","-143":"SPDY_SESSION_ALREADY_EXISTS","-145":"WS_PROTOCOL_ERROR","-146":"PROTOCOL_SWITCHED","-147":"ADDRESS_IN_USE","-148":"SSL_HANDSHAKE_NOT_COMPLETED","-149":"SSL_BAD_PEER_PUBLIC_KEY","-150":"SSL_PINNED_KEY_NOT_IN_CERT_CHAIN","-151":"CLIENT_AUTH_CERT_TYPE_UNSUPPORTED","-152":"ORIGIN_BOUND_CERT_GENERATION_TYPE_MISMATCH","-153":"SSL_DECRYPT_ERROR_ALERT","-154":"WS_THROTTLE_QUEUE_TOO_LARGE","-155":"TOO_MANY_SOCKET_STREAMS","-156":"SSL_SERVER_CERT_CHANGED","-157":"SSL_INAPPROPRIATE_FALLBACK","-158":"CT_NO_SCTS_VERIFIED_OK","-159":"SSL_UNRECOGNIZED_NAME_ALERT","-200":"CERT_COMMON_NAME_INVALID","-201":"CERT_DATE_INVALID","-202":"CERT_AUTHORITY_INVALID","-203":"CERT_CONTAINS_ERRORS","-204":"CERT_NO_REVOCATION_MECHANISM","-205":"CERT_UNABLE_TO_CHECK_REVOCATION","-206":"CERT_REVOKED","-207":"CERT_INVALID","-208":"CERT_WEAK_SIGNATURE_ALGORITHM","-210":"CERT_NON_UNIQUE_NAME","-211":"CERT_WEAK_KEY","-212":"CERT_NAME_CONSTRAINT_VIOLATION","-213":"CERT_END","-300":"INVALID_URL","-301":"DISALLOWED_URL_SCHEME","-302":"UNKNOWN_URL_SCHEME","-310":"TOO_MANY_REDIRECTS","-311":"UNSAFE_REDIRECT","-312":"UNSAFE_PORT","-320":"INVALID_RESPONSE","-321":"INVALID_CHUNKED_ENCODING","-322":"METHOD_NOT_SUPPORTED","-323":"UNEXPECTED_PROXY_AUTH","-324":"EMPTY_RESPONSE","-325":"RESPONSE_HEADERS_TOO_BIG","-326":"PAC_STATUS_NOT_OK","-327":"PAC_SCRIPT_FAILED","-328":"REQUEST_RANGE_NOT_SATISFIABLE","-329":"MALFORMED_IDENTITY","-330":"CONTENT_DECODING_FAILED","-331":"NETWORK_IO_SUSPENDED","-332":"SYN_REPLY_NOT_RECEIVED","-333":"ENCODING_CONVERSION_FAILED","-334":"UNRECOGNIZED_FTP_DIRECTORY_LISTING_FORMAT","-335":"INVALID_SPDY_STREAM","-336":"NO_SUPPORTED_PROXIES","-337":"SPDY_PROTOCOL_ERROR","-338":"INVALID_AUTH_CREDENTIALS","-339":"UNSUPPORTED_AUTH_SCHEME","-340":"ENCODING_DETECTION_FAILED","-341":"MISSING_AUTH_CREDENTIALS","-342":"UNEXPECTED_SECURITY_LIBRARY_STATUS","-343":"MISCONFIGURED_AUTH_ENVIRONMENT","-344":"UNDOCUMENTED_SECURITY_LIBRARY_STATUS","-345":"RESPONSE_BODY_TOO_BIG_TO_DRAIN","-346":"RESPONSE_HEADERS_MULTIPLE_CONTENT_LENGTH","-347":"INCOMPLETE_SPDY_HEADERS","-348":"PAC_NOT_IN_DHCP","-349":"RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION","-350":"RESPONSE_HEADERS_MULTIPLE_LOCATION","-351":"SPDY_SERVER_REFUSED_STREAM","-352":"SPDY_PING_FAILED","-353":"PIPELINE_EVICTION","-354":"CONTENT_LENGTH_MISMATCH","-355":"INCOMPLETE_CHUNKED_ENCODING","-356":"QUIC_PROTOCOL_ERROR","-357":"RESPONSE_HEADERS_TRUNCATED","-358":"QUIC_HANDSHAKE_FAILED","-400":"CACHE_MISS","-401":"CACHE_READ_FAILURE","-402":"CACHE_WRITE_FAILURE","-403":"CACHE_OPERATION_NOT_SUPPORTED","-404":"CACHE_OPEN_FAILURE","-405":"CACHE_CREATE_FAILURE","-406":"CACHE_RACE","-407":"CACHE_CHECKSUM_READ_FAILURE","-408":"CACHE_CHECKSUM_MISMATCH","-501":"INSECURE_RESPONSE","-502":"NO_PRIVATE_KEY_FOR_CERT","-503":"ADD_USER_CERT_FAILED","-601":"FTP_FAILED","-602":"FTP_SERVICE_UNAVAILABLE","-603":"FTP_TRANSFER_ABORTED","-604":"FTP_FILE_BUSY","-605":"FTP_SYNTAX_ERROR","-606":"FTP_COMMAND_NOT_SUPPORTED","-607":"FTP_BAD_COMMAND_SEQUENCE","-701":"PKCS12_IMPORT_BAD_PASSWORD","-702":"PKCS12_IMPORT_FAILED","-703":"IMPORT_CA_CERT_NOT_CA","-704":"IMPORT_CERT_ALREADY_EXISTS","-705":"IMPORT_CA_CERT_FAILED","-706":"IMPORT_SERVER_CERT_FAILED","-707":"PKCS12_IMPORT_INVALID_MAC","-708":"PKCS12_IMPORT_INVALID_FILE","-709":"PKCS12_IMPORT_UNSUPPORTED","-710":"KEY_GENERATION_FAILED","-711":"ORIGIN_BOUND_CERT_GENERATION_FAILED","-712":"PRIVATE_KEY_EXPORT_FAILED","-713":"SELF_SIGNED_CERT_GENERATION_FAILED","-714":"CERT_DATABASE_CHANGED","-800":"DNS_MALFORMED_RESPONSE","-801":"DNS_SERVER_REQUIRES_TCP","-802":"DNS_SERVER_FAILED","-803":"DNS_TIMED_OUT","-804":"DNS_CACHE_MISS","-805":"DNS_SEARCH_EMPTY","-806":"DNS_SORT_ERROR"}};a.prototype.getErrorMessage=function(a){return this.errorCodeMap[String(a)]},MySQL.networkErrorCode=new a}(),function(){"use strict";var a=function(){};a.prototype.sha1ToWordArray=function(a){return CryptoJS.SHA1(a)},a.prototype.sha1ToUint8Array=function(a){var b=this.sha1ToWordArray(a);return this.wordArrayToUnit8Array(b)},a.prototype.sha1Uint8ArrayToUint8Array=function(a){var b=this.uint8ArrayToWords(a),c=CryptoJS.lib.WordArray.create(b,a.length);return this.sha1ToUint8Array(c)},a.prototype.uint8ArrayToWords=function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=a[d]<<24-d%4*8;return c},a.prototype.wordArrayToUnit8Array=function(a){for(var b=new ArrayBuffer(a.sigBytes),c=new DataView(b,0,b.byteLength),d=0;d<a.words.length;d++)c.setInt32(4*d,a.words[d],!1);return new Uint8Array(b)},MySQL.hasher=new a}(),function(){"use strict";var a=function(){this.encoding="utf-8"};a.prototype.arrayBufferToString=function(a){var b=new Uint8Array(a),c=new TextDecoder(this.encoding).decode(b);return c},a.prototype.stringToArrayBuffer=function(a){for(var b=new TextEncoder(this.encoding).encode(a),c=new ArrayBuffer(b.length),d=new DataView(c),e=0;e<b.length;e++)d.setInt8(e,b[e]);return c},a.prototype.createUint8Array=function(a){var b=new ArrayBuffer(a);return new Uint8Array(b)},MySQL.binaryUtils=new a}(),function(a){"use strict";var b=function(){};b.prototype.createFixedLengthInteger=function(a,b){var c=new ArrayBuffer(4),d=new DataView(c);d.setUint32(0,a,!0);var e=new Uint8Array(c),f=e.subarray(0,b);return f},b.prototype.createLengthEncodedString=function(b){var c=a.stringToArrayBuffer(b),d=new Uint8Array(c),e=d.length,f=this.createLengthEncodedInteger(e),g=new Uint8Array(f.length+d.length);return g.set(f,0),g.set(d,f.length),g},b.prototype.createNullEndValue=function(a){var b=new Uint8Array(a),c=new Uint8Array(b.length+1);return c.set(b,0),c},b.prototype.createLengthEncodedInteger=function(a){var b=null,c=0;if(null===a)return b=new Uint8Array(1),b[0]=251,b;if(a>=0&&250>=a)return b=new Uint8Array(1),b[0]=a,b;var d=new ArrayBuffer(4),e=new DataView(d);e.setUint32(0,a,!1);var f=new Uint8Array(d),g=4;for(c=0;c<f.length;c++)if(0!==f[c]){g-=c;break}if(a>=251&&2==g){for(b=new Uint8Array(3),b[0]=252,c=0;g>c;c++)b[c+1]=f[f.length-1-c];return b}if(3==g){for(b=new Uint8Array(4),b[0]=253,c=0;g>c;c++)b[c+1]=f[f.length-1-c];return b}for(b=new Uint8Array(9),b[0]=254,c=0;g>c;c++)b[c+1]=f[f.length-1-c];return b},b.prototype.createNullEndString=function(b){var c=a.stringToArrayBuffer(b);return this.createNullEndValue(c)},b.prototype.getNullEndString=function(b,c){for(var d=new Uint8Array(b),e=c;e<d.length&&0!==d[e];e++);var f=new Uint8Array(d.subarray(c,e)),g=a.arrayBufferToString(f.buffer);return{result:g,nextPosition:e+1}},b.prototype.getFixedLengthString=function(b,c,d){var e=new Uint8Array(b),f=new Uint8Array(e.subarray(c,c+d)),g=a.arrayBufferToString(f.buffer);return g},b.prototype.getLengthEncodedString=function(a,b){var c=this.getLengthEncodedInteger(a,b);if(null===c.result)return{result:null,nextPosition:c.nextPosition};var d=this.getFixedLengthString(a,c.nextPosition,c.result);return{result:d,nextPosition:c.nextPosition+c.result}},b.prototype.getFixedLengthInteger=function(a,b,c){var d=new Uint8Array(a),e=d.subarray(b,b+c),f=new Uint8Array(4);f.set(e,0);var g=new DataView(f.buffer,0,4),h=g.getUint32(0,!0);return h},b.prototype.getLengthEncodedInteger=function(a,b){var c=new Uint8Array(a),d=c[b];if(251==d)return{result:null,nextPosition:b+1};if(250>=d)return{result:d,nextPosition:b+1};var e=0;e=252==d?2:253==d?3:8;for(var f=c.subarray(b+1,b+1+e),g=new ArrayBuffer(8),h=new Uint8Array(g),i=0;i<f.length;i++)h[i]=f[i];var j=new DataView(g),k=j.getInt32(0,!0);return{result:k,nextPosition:b+1+e}},MySQL.types=new b}(MySQL.binaryUtils),function(a){"use strict";var b=function(a,b){this.sequenceNumber=a,this.data=b,this.dataLength=b.byteLength};b.prototype.getArrayBuffer=function(){var b=new ArrayBuffer(4+this.dataLength),c=a.createFixedLengthInteger(this.dataLength,3),d=new Uint8Array(b);return d.set(c,0),d[3]=this.sequenceNumber,d.set(new Uint8Array(this.data),4),b},MySQL.Packet=b}(MySQL.types),function(){"use strict";var a=function(a,b,c,d,e,f,g,h,i,j,k){this.protocolVersion=a,this.serverVersion=b,this.connectionId=c,this.authPluginDataPart1=d,this.capabilityFlag1=e,this.characterSet=f,this.statusFlags=g,this.capabilityFlag2=h,this.authPluginDataLen=i,this.authPluginDataPart2=j,this.authPluginName=k};MySQL.InitialHandshakeRequest=a}(),function(){"use strict";var a=function(a,b,c,d,e){this.affectedRows=a,this.lastInsertId=b,this.statusFlags=c,this.warnings=d,this.info=e};a.prototype.isSuccess=function(){return!0},a.prototype.hasResultset=function(){return!1},MySQL.OkResult=a}(),function(){"use strict";var a=function(a,b,c,d){this.errorCode=a,this.sqlStateMarker=b,this.sqlState=c,this.errorMessage=d};a.prototype.isSuccess=function(){return!1},MySQL.ErrResult=a}(),function(){"use strict";var a=function(a){this.columnCount=a};a.prototype.isSuccess=function(){return!0},a.prototype.hasResultset=function(){return!0},MySQL.QueryResult=a}(),function(){"use strict";var a=function(a,b,c,d,e,f,g,h,i,j,k,l){this.catalog=a,this.schema=b,this.table=c,this.orgTable=d,this.name=e,this.orgName=f,this.nextLength=g,this.characterSet=h,this.columnLength=i,this.columnType=j,this.flags=k,this.decimals=l};MySQL.ColumnDefinition=a}(),function(){"use strict";var a=function(a){this.values=a};MySQL.ResultsetRow=a}(),function(){"use strict";var a=function(a,b){this.warningCount=a,this.statusFlags=b};MySQL.EofResult=a}(),function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(){},l=function(a,c,d){var f=b.getLengthEncodedInteger(a,c),g=f.result,h=b.getLengthEncodedInteger(a,f.nextPosition),i=h.result,j=b.getFixedLengthInteger(a,h.nextPosition,2),k=b.getFixedLengthInteger(a,h.nextPosition+2,2),l="";if(d>h.nextPosition+4){var m=d-h.nextPosition+4;l=b.getFixedLengthString(a,h.nextPosition+4,m)}return new e(g,i,j,k,l)},m=function(a,c,d){var e=b.getFixedLengthInteger(a,c,2),g=b.getFixedLengthString(a,c+2,1),h=b.getFixedLengthString(a,c+3,5),i=d-c-8,j=b.getFixedLengthString(a,c+8,i);return new f(e,g,h,j)};k.prototype.generateStatisticsRequest=function(){var a=new ArrayBuffer(1),b=new Uint8Array(a);return b[0]=9,b},k.prototype.generateQueryRequest=function(b){var c=a.stringToArrayBuffer(b),d=new Uint8Array(c),e=a.createUint8Array(1+d.length);return e[0]=3,e.set(d,1),e},k.prototype.generateInitDBRequest=function(b){var c=a.stringToArrayBuffer(b),d=new Uint8Array(c),e=a.createUint8Array(1+d.length);return e[0]=2,e.set(d,1),e},k.prototype.generateHandshakeResponse=function(a,c,d){var e=557569,f=b.createFixedLengthInteger(e,4),g=b.createFixedLengthInteger(16777215,4),h=b.createLengthEncodedInteger(33),i=b.createNullEndString(c),j=b.createLengthEncodedInteger(d.length),k=b.createNullEndString(a.authPluginName),l=f.length+g.length+h.length+23+i.length+j.length+d.length+k.length,m=new ArrayBuffer(l),n=new Uint8Array(m),o=0;return n.set(f,o),o+=f.length,n.set(g,o),o+=g.length,n.set(h,o),o+=h.length,o+=23,n.set(i,o),o+=i.length,n.set(j,o),o+=j.length,n.set(d,o),o+=d.length,n.set(k,o),n},k.prototype.generatePasswordHash=function(a,b){var d=c.sha1ToUint8Array(b),e=c.sha1Uint8ArrayToUint8Array(d),f=a.authPluginDataPart1,g=a.authPluginDataPart2,h=new ArrayBuffer(f.length+g.length+e.length),i=new Uint8Array(h);i.set(f,0),i.set(g,f.length),i.set(e,f.length+g.length);for(var j=c.sha1Uint8ArrayToUint8Array(i),k=new Uint8Array(d.length),l=0;l<k.length;l++)k[l]=d[l]^j[l];return k},k.prototype.parseQueryResultPacket=function(a,c){var e=a.data,f=b.getFixedLengthInteger(e,0,1);if(0===f){var g=l.call(this,e,1,a.dataLength);c(g)}else if(255==f){var h=m.call(this,e,1,a.dataLength);c(h)}else{var i=b.getLengthEncodedInteger(e,0),j=new d(i.result);c(j)}},k.prototype.parseOkErrResultPacket=function(a){var c=a.data,d=b.getFixedLengthInteger(c,0,1);return 0===d?l.call(this,c,1,a.dataLength):255==d?m.call(this,c,1,a.dataLength):null},k.prototype.parseEofPacket=function(a){var c=a.data,d=b.getFixedLengthInteger(c,0,1);if(254==d){var e=b.getFixedLengthInteger(c,1,2),f=b.getFixedLengthInteger(c,3,2);return new g(e,f)}return null},k.prototype.parseInitialHandshakePacket=function(a){var c=a.data,d=0,e=b.getFixedLengthInteger(c,d++,1),f=b.getNullEndString(c,d),g=f.result;d=f.nextPosition;var i=b.getFixedLengthInteger(c,d,4);d+=4;var j=new Uint8Array(c,d,8);d+=9;var k=b.getFixedLengthInteger(c,d,2);d+=2;var l=b.getFixedLengthInteger(c,d++,1),m=b.getFixedLengthInteger(c,d,2);d+=2;var n=b.getFixedLengthInteger(c,d,2);d+=2;var o=b.getFixedLengthInteger(c,d++,1);d+=10;var p=new Uint8Array(c,d,12);d+=13;var q=b.getNullEndString(c,d),r=q.result;return new h(e,g,i,j,k,l,m,n,o,p,r)},k.prototype.parseColumnDefinitionPacket=function(a){var c=a.data,d=b.getLengthEncodedString(c,0),e=b.getLengthEncodedString(c,d.nextPosition),f=b.getLengthEncodedString(c,e.nextPosition),g=b.getLengthEncodedString(c,f.nextPosition),h=b.getLengthEncodedString(c,g.nextPosition),j=b.getLengthEncodedString(c,h.nextPosition),k=b.getLengthEncodedInteger(c,j.nextPosition),l=k.nextPosition,m=b.getFixedLengthInteger(c,l,2);l+=2;var n=b.getFixedLengthInteger(c,l,4);l+=4;var o=b.getFixedLengthInteger(c,l,1);l+=1;var p=b.getFixedLengthInteger(c,l,2);l+=2;var q=b.getFixedLengthInteger(c,l,1);return new i(d.result,e.result,f.result,g.result,h.result,j.result,k.result,m,n,o,p,q)},k.prototype.parseResultsetRowPacket=function(a){for(var c=a.data,d=0,e=[];d<a.dataLength;){var f=b.getLengthEncodedString(c,d);e.push(f.result),d=f.nextPosition}return new j(e)},k.prototype.parseStatisticsResultPacket=function(a){var c=a.data,d=a.dataLength,e=b.getFixedLengthString(c,0,d);return e},MySQL.protocol=new k}(MySQL.binaryUtils,MySQL.types,MySQL.hasher,MySQL.QueryResult,MySQL.OkResult,MySQL.ErrResult,MySQL.EofResult,MySQL.InitialHandshakeRequest,MySQL.ColumnDefinition,MySQL.ResultsetRow),function(a,b){"use strict";var c=function(){this.nextSequenceNumber=0,this.socketImpl=null},d=function(a,b,c,e,f){this.readPacket(function(g){c.push(g),a+=1,b>a?d.call(this,a,b,c,e,f):e(c)}.bind(this),f)},e=function(a,c,d){f.call(this,a,function(d){var e=b.getFixedLengthInteger(d.data,0,a);c(e)}.bind(this),d)},f=function(a,b,c){this.socketImpl.read(a,b,c)};c.prototype.setSocketImpl=function(a){this.socketImpl=a},c.prototype.connect=function(a,b,c){this.socketImpl.connect(a,b,c)},c.prototype.disconnect=function(a){this.socketImpl.disconnect(a)},c.prototype.isConnected=function(){return this.socketImpl.isConnected()},c.prototype.readPacket=function(b,c){e.call(this,3,function(d){e.call(this,1,function(e){this.incrementSequenceNumber(e),f.call(this,d,function(c){var d=new a(e,c.data);b(d)}.bind(this),c)}.bind(this),c)}.bind(this),c)},c.prototype.readPluralPackets=function(a,b,c){d.call(this,0,a,[],b,c)},c.prototype.writePacket=function(a,b,c){this.socketImpl.write(a,b,c)},c.prototype.incrementSequenceNumber=function(a){this.nextSequenceNumber=a+1,this.nextSequenceNumber>255&&(this.nextSequenceNumber=0)},c.prototype.createPacket=function(b){return new a(this.nextSequenceNumber,b)},c.prototype.resetSequenceNumber=function(){this.nextSequenceNumber=0},MySQL.communication=new c}(MySQL.Packet,MySQL.types),function(a,b){"use strict";var c=function(){},d=function(c,d,e,f){a.readPacket(function(g){var h=b.parseInitialHandshakePacket(g),i=b.generatePasswordHash(h,d),j=b.generateHandshakeResponse(h,c,i),k=a.createPacket(j.buffer);a.writePacket(k,function(){a.readPacket(function(a){var c=b.parseOkErrResultPacket(a);e(h,c)}.bind(this),f)}.bind(this),f)}.bind(this),f)},e=function(c,d,f){a.readPacket(function(a){var g=b.parseEofPacket(a);if(g)d(c);else{var h=b.parseResultsetRowPacket(a);c.push(h),e.call(this,c,d,f)}}.bind(this),f)},f=function(c,d,f,g,h){a.readPluralPackets(c,function(c){for(var f=[],g=0;g<c.length;g++)f.push(b.parseColumnDefinitionPacket(c[g]));a.readPacket(function(a){b.parseEofPacket(a),e.call(this,[],function(a){d(f,a)}.bind(this),h)}.bind(this),h)}.bind(this),h)},g=function(c,d,e,g){a.readPacket(function(a){b.parseQueryResultPacket(a,function(a){if(a.isSuccess()&&a.hasResultset()){var b=a.columnCount;f.call(this,b,c,d,e,g)}else a.isSuccess()&&!a.hasResultset()?d(a):e(a)}.bind(this))}.bind(this),g)},h=function(c,d,e,f,h){var i=b.generateQueryRequest(c),j=a.createPacket(i.buffer);a.writePacket(j,function(){g.call(this,d,e,f,h)}.bind(this),h)};c.prototype.login=function(b,c,e,f,g,h,i){a.connect(b,c,function(a){a>=0?d.call(this,e,f,g,i):h(a+"("+networkErrorCode.getErrorMessage(a)+")")}.bind(this))},c.prototype.logout=function(b){a.disconnect(b)},c.prototype.query=function(b,c,d,e,f){return a.isConnected()?(a.resetSequenceNumber(),void h.call(this,b,c,d,e,f)):void f("Not connected.")},c.prototype.getDatabases=function(b,c,d){return a.isConnected()?void this.query("SHOW DATABASES",function(a,c){for(var d=[],e=0;e<c.length;e++)d.push(c[e].values[0]);b(d)}.bind(this),function(){console.log("This callback function never be called.")}.bind(this),function(a){c(a)}.bind(this),d):void d("Not connected.")},c.prototype.initDB=function(c,d,e){if(!a.isConnected())return void e("Not connected.");a.resetSequenceNumber();var f=b.generateInitDBRequest(c),g=a.createPacket(f.buffer);a.writePacket(g,function(){a.readPacket(function(a){var c=b.parseOkErrResultPacket(a);d(c)}.bind(this),e)}.bind(this),e)},c.prototype.getStatistics=function(c,d){if(!a.isConnected())return void d("Not connected.");a.resetSequenceNumber();var e=b.generateStatisticsRequest(),f=a.createPacket(e);a.writePacket(f,function(){a.readPacket(function(a){var d=b.parseStatisticsResultPacket(a);c(d)}.bind(this),d)}.bind(this),d)},MySQL.client=new c}(MySQL.communication,MySQL.protocol,MySQL.networkErrorCode),function(){var a=function(){this.socketId=null};a.prototype.connect=function(a,b,c){chrome.socket.create("tcp",{},function(d){this.socketId=d.socketId,chrome.socket.connect(this.socketId,a,b,function(a){c(a)}.bind(this))}.bind(this))},a.prototype.isConnected=function(){return null!==this.socketId},a.prototype.disconnect=function(a){this.socketId&&(chrome.socket.disconnect(this.socketId),chrome.socket.destroy(this.socketId)),this.socketId=null,a&&a()},a.prototype.write=function(a,b,c){chrome.socket.write(this.socketId,a.getArrayBuffer(),function(a){var d=a.bytesWritten;d>0?b(a):(console.log("Error: writeInfo.bytesWritten="+d),c("Sending packet failed: "+d))}.bind(this))},a.prototype.read=function(a,b,c){chrome.socket.read(this.socketId,a,function(a){var d=a.resultCode;d>0?b(a):(console.log("Error: readInfo.resultCode="+d+" data="+a.data),c("Reading packet failed: "+d))}.bind(this))},MySQL.ChromeSocket=a}();